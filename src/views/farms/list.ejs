<%- include('../layouts/header') %>

<div class="d-flex justify-content-between align-items-center mb-4">
    <h2>Tarlalarım</h2>
    <a href="/farms/new" class="btn btn-success">
        ➕ Yeni Tarla Ekle
    </a>
</div>

<% if (typeof farms !== 'undefined' && farms.length > 0) { %>
    <div class="table-responsive">
        <table class="table table-striped table-hover">
            <thead class="table-dark">
                <tr>
                    <th>ID</th>
                    <th>Tarla Adı</th>
                    <th>Şehir</th>
                    <th>İlçe</th>
                    <th>Ürün Tipi</th>
                    <th>Alan (Dekar)</th>
                    <th>Kayıt Tarihi</th>
                    <th>İşlemler</th>
                </tr>
            </thead>
            <tbody>
                <% farms.forEach(farm => { %>
                    <tr>
                        <td><%= farm.id %></td>
                        <td><strong><%= farm.name %></strong></td>
                        <td><%= farm.city %></td>
                        <td><%= farm.district %></td>
                        <td><%= farm.crop_type || '-' %></td>
                        <td><%= farm.area_decare %> dekar</td>
                        <td><%= new Date(farm.created_at).toLocaleDateString('tr-TR') %></td>
                        <td>
                            <div class="btn-group btn-group-sm" role="group">
                                <a href="/farms/<%= farm.id %>" class="btn btn-info btn-sm">Detay</a>
                                <a href="/farms/<%= farm.id %>/edit" class="btn btn-warning btn-sm">Düzenle</a>
                                <form action="/farms/<%= farm.id %>/delete" method="POST" class="d-inline" onsubmit="return confirm('Bu tarlayı silmek istediğinizden emin misiniz?');">
                                    <button type="submit" class="btn btn-danger btn-sm">Sil</button>
                                </form>
                            </div>
                        </td>
                    </tr>
                <% }) %>
            </tbody>
        </table>
    </div>
<% } else { %>
    <div class="alert alert-info">
        <h4>Henüz tarla eklenmemiş</h4>
        <p>İlk tarlanızı eklemek için <a href="/farms/new">buraya tıklayın</a>.</p>
    </div>
<% } %>

<%- include('../layouts/footer') %>

